

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/icons/logo.svg" sizes="any" type="image/svg+xml">
    <title>QuickGigs</title>
    <link rel="stylesheet" href="css/bsModed.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
   

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<body onload="myFunction()" style="margin:0; padding: 0;">
<!-- Modal -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body" style="padding: 5vh;">
        <p style="font-family: BreeSerif-Regular;">Mail</p>
        <input type="email" class="form-control" id="accountModalEmail"  placeholder="e-mail"  readonly>
      </div>
      <div class="modal-footer">
        <a href="#" class="button"data-dismiss="modal" style="background-color: gray;">Close</a>
        <a class="button" onclick="logout(this)">Log out</a>
      </div>
    </div>
  </div>
</div>

  <!--SNACKBAR DIV-->
  <div id="snackbar"></div>  

  <!--LOADER CONTAINER-->
  <div id="loader"></div>

  <!--GO TO TOP BUTTON-->
  <button
  type="button"
  class="btn btn-floating btn-lg"
  id="btn-back-to-top">
  <img src="./assets/icons/up-arrow-svgrepo-com.svg" style="width: 40px; height: 40px; margin: 0%;"/>
  </button>  
  

  <div style="display:none; margin: 0%;" id="myDiv" class="fade-in">
    
    <!-- BRAND, LOGO AND DYNAMIC MENU -->
    <div style="height: fit-content;   margin: 0;">
      <nav class="navbar navbar-expand-md navbar-light bg-light" style=" padding: 15px; margin: 0%; box-shadow: 2px 2px 25px grey;">
          <a class="col col-lg-2 navbar-brand" href="#"
          data-aos="fade-right"
          data-aos-duration="700"
          data-aos-easing="ease-in-sine"
          style="width: fit-content">
         
            <img src="assets/icons/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="" 
            style="float: left;" ><div style="float: left;">QuickGigs</div>
         
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" 
              style="
              border-style: none; 
              float: right;
              margin-left: auto;">
            <span class="navbar-toggler-icon" ></span>
          </button>

          </a>
        
          <!--LARGE SCREEN USER BUTTON-->
          <div id="userlg" class="zoom d-lg-none dg-xl-none" style="float:pull-right; margin: 0%; ">
            <a data-toggle="modal" data-target="#exampleModalLong">
              <img src="assets/icons/user-circle.svg" width="30" height="30" class="d-inline-block align-top" alt="" 
              style="float: left;">
            </a>
          </div>

          <!--NAVBAR ITEMS-->
          <div class="collapse navbar-collapse" id="navbarNav"  toggle="collapse" data-target=".navbar-collapse">
            <ul class="navbar-nav mr-auto" id="navbarItems">
              <li class="nav-item active" id="homeli">
                <a class="nav-link" href="#home"
                  data-aos="fade-right"
                  data-aos-duration="1000"
                  data-aos-easing="ease-in-back">Home </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#jobs"
                  data-aos="fade-right"
                  data-aos-duration="1400"
                  data-aos-easing="ease-in-back">Find a Job</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#gigsMap"
                  data-aos="fade-right"
                  data-aos-duration="1950"
                  data-aos-easing="ease-in-back">Gigs near you</a>
              </li>
              <li class="nav-item">
                <a class="nav-link"
                href="#postGig"
                  data-aos="fade-right"
                  id="btn_post_gig"
                  data-aos-duration="2500"
                  data-aos-easing="ease-in-back">Post a gig</a>
              </li>
              <!--li class="nav-item">
                <a class="nav-link" href="#faq"
                  data-aos="fade-right"
                  data-aos-duration="3000"
                  data-aos-easing="ease-in-back">F.A.Q.</a>
              </li-->
            </ul>    
          </div>

            <!--SMALL SCREEN USER BUTTON-->
          <div id="usersm" class="zoom d-none d-lg-block d-xl-block" style="float:pull-right; margin: 0%; ">
            <a data-toggle="modal" data-target="#exampleModalLong">
              <img src="assets/icons/user-circle.svg" width="30" height="30" class="d-inline-block align-top" alt="" 
              style="float: left;">
            </a>
          </div>

      </nav>
    </div>
    <!----------WEBPAGE CONTENT--------->



    <div  class="container-fluid justify-content-center" style="height: 100vh; width: 100%;  margin: 0; padding: 0; ">
      <a id="home"></a>

      <div id="accountForm">
        <div class="row">
          <div class="col-12 col-lg-6 area"  style="margin: 0%; padding: 0px;">
            <div class="context" >
              <h1 style="margin-left: 7vh; margin-top: 5vh;"><p class="now">NOW</p> is the time to THRIVE</h1>
              
          </div>
            <ul class="col col-lg-6 circles" style=" margin: 0%; width: 100%; height: 100%;">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
            </ul>
          </div >
          <div class="col-12 col-lg-6 p-0 m-0 justify-content-center " style="align-self: center;" data-aos="fade-right">
            <a id="login"></a>

            <div class="form-row"   style="height: 100vh; justify-content: center; padding: 3vh;">
              <div class="form-group"  id="currentFormContainer" >
             </div>
            </div>
            
          </div>
        </div>
      </div>

      <!--HOME SECTION-->
      
      
      <script>
        container = document.getElementById("currentFormContainer");

        async function initQuickGigs(){
          var container = null;
          await getGigs();
          showGigs(gigsList);
          if(sessionStorage.getItem("sesion") == "true"){
            
            document.getElementById('accountForm').remove();
            document.getElementById('logintopostgigs').remove();

            fillModal();
            showMyGigs();

            document.getElementById('navbarItems').innerHTML += '<li class="nav-item" id="mygigsli">'
              +'<a class="nav-link" href="#mygigs"'
              +'data-aos="fade-right"'
              +'data-aos-duration="1000"'
              +'data-aos-easing="ease-in-back">My Gigs </a>'
              +'</li>';
           
          }else{
            container = document.getElementById("currentFormContainer");
            setLoginForm();
            document.getElementById('postGigForm').remove();
            document.getElementById("userlg").remove();
            document.getElementById("usersm").remove();
            document.getElementById('removeMyGigs').remove();

            //
          }
        }

        function setLoginForm(){
          //document.getElementById('accountForm').onsubmit = //lookupCredentials();
          let values = "document.getElementById('inputLoginEmail').value, document.getElementById('inputLoginPassword').value"

          container.innerHTML = '<form id="loginForm" action="javascript:void(0);" onsubmit="login(this)" class="row justify-content-center" style="margin-top: 7vh;"><div class="row justify-content-center" style="margin-top: 15vh;">'
            +'<div class="row justify-content-center" >'
            +'<div class="col-12 col-lg-5 p-2 justify-content-center" >'
            +'<h3>Back for more?</h3>'
            +'<input type="email" class="form-control" id="inputLoginEmail"  placeholder="e-mail" required>'
            +'</div>'
            +'</div>'
            +'<div class="row justify-content-center" >'
            +'<div class="col-12 col-lg-5 p-2 mt-2 justify-content-center">'
            +'<input type="password" class="form-control" id="inputLoginPassword" placeholder="Password" required>'
            +'</div>'
            +'</div>'    
            +'</div>'
            +'<div class="row justify-content-center" style="margin-top: 5vh;">'
            +'<input href="#" id="loginButton" class="roundedButton button" type="submit" value="LOG IN" style="background-color: black; color: white; width: fit-content; margin-bottom: 1vh; padding-left: 3vh; padding-right: 3vh;"/>'
            +'</div>'
            +'<div class="row justify-content-center">'
            +'<a href="#" id="forgotPassword" onclick="setNewPasswordForm()" >I forgot my password :(</a>'
            +'<b><p style="margin-top: 7vh;">New to QuickGigs?</p></b>'
            +'<a href="#" id="newAccount" onclick="setNewAccountForm()">Create a new account</a>'
            +'</div></form>';
            
        }

        
        function setNewAccountForm(){          
          container.innerHTML = ''
            +'<form autocomplete="off" id="signupForm" onsubmit="signup(this)" class="row justify-content-center" style="margin-top: 15vh;">'
            +'<div class="row justify-content-center" style="margin-top: 15vh;">'
            +'<div class="row justify-content-center" >'
            +'<div class="col-12 col-lg-5 p-2 justify-content-center" >'
            +'<h3>Create new account</h3>'
            +'<input type="email" class="form-control" id="inputNewEmail"  placeholder="e-mail" required>'
            +'</div>'
            +'</div>'
            +'<div class="row justify-content-center" >'
            +'<div class="col-12 col-lg-5 p-2 mt-2 justify-content-center">'
            +'<input type="password" class="form-control" id="inputNewPassword" placeholder="Password" required>'
            +'</div>'
            +'</div>'
            +'<div class="row justify-content-center" >'
            +'<div class="col-12 col-lg-5 p-2 mt-2 justify-content-center">'
            +'<input type="password" class="form-control" id="inputNewPassword2" placeholder="Confirm password" required>'
            +'</div>'
            +'</div>'
            +'</div>'
            +'<div class="row justify-content-center" style="margin-top: 5vh;">'
            +'<input class="roundedButton button" href="#" type="submit" value="CREATE ACCOUNT" style="background-color: black; color: white; width: fit-content; margin-bottom: 1vh; padding-left: 3vh; padding-right: 3vh;"/>'
            +'</div>'
            +'<div class="row justify-content-center">'
            +'<b><p style="margin-top: 2vh;">or</p></b>'
            +'<a id="newAccount" href="#" onclick="setLoginForm()">Login with an existing account</a>'
            +'</div></form>'
        }

        function setNewPasswordForm(){
          
          //document.getElementById('accountForm').onsubmit = showToast('CAMBIAR CONTRASEÑA API');
          container.innerHTML = ''
          +'<form onsubmit="changePassword(this)" style="margin-top: 30%;">'
          + '<div class="row justify-content-center" style="margin: auto;">'
          +   '<div class="col-10 col-lg-7 col-md-6" style="align-items: center;">'
          +  '<h3>Reset password</h3>'
          +     ' <input id="inputForgotPasswordEmail" class="form-control" type="email" placeholder="e-mail" style="padding: 1vh; margin: auto" required>'
          +    '<input class="roundedButton button" type="submit" value="SUBMIT" style="background-color: black; color: white; width: fit-content; margin-bottom: 1vh; padding-left: 3vh; padding-right: 3vh;">'
          +     '<br><br>'
          +     'or<br>'
          +     '<a href="#" id="newAccount" onclick="setLoginForm()">Return to login</a>'
          + '</div>'
          +'</div>'
          +'</form>'
        }

        function fillModal(){
          document.getElementById('accountModalEmail').value = sessionStorage.getItem('email');
          document.getElementById('postGigInputEmail').value = sessionStorage.getItem('email');
        }
      </script>

     
      <!--CAROUSEL-->
      <a id="jobs"></a>
      <div class="row" style="height: fit-content; width: 100%; background-color: blue; margin: 0; padding: 0;">
        <!--CARRUSEL-->
       <div id="myCarousel" class="carousel slide" data-ride="carousel" style="height: 50vh; margin: 0; padding: 0;
       ">
         <!-- Indicators -->
         <ol class="carousel-indicators">
           <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
           <li data-target="#myCarousel" data-slide-to="1"></li>
           <li data-target="#myCarousel" data-slide-to="2"></li>
         </ol>
     
         <!-- Wrapper for slides -->
         <div class="carousel-inner" style="margin: 0; padding: 0;">
           <div class="item active">
             <img src="assets/imgs/carousel1.jpg" alt="Freelancer" style="width:100%; height: 50vh; object-fit: cover;">
             <div class="carousel-caption">
               <h3 style="font-size: 10vh;">Find the best deal <br><i>QUICK</i></h3>
               <p style="font-size: 3vh; text-align: left;">QuickGigs helps you connect with freelancers near you.</p>
             </div>
           </div>
     
           <div class="item">
             <img src="assets/imgs/carousel2.jpg" alt="Man painting wall" style="width:100%; height: 50vh;   object-fit: cover;">
             <div class="carousel-caption">
               <h3 style="font-size: 10vh; text-align: left;"> Build your career <br>start today</h3>
               <p style="font-size: 3vh; text-align: left;">Looking for extra income? Get a gig, quick.</p>
 
             </div>
           </div>
         
           <div class="item">
             <img src="assets/imgs/carousel3.jpg" alt="Handshake" style="width:100%; height: 50vh;   object-fit: cover;">
             <div class="carousel-caption">
               <h3 style="font-size: 10vh; text-align: center"> Plan it from <i>home</i></h3>
               <p style="font-size: 3vh; text-align: center;">Stay home, you are only one click away from a quick gig.</p>
 
 
             </div>
           </div>
         </div>
     
         <!-- Left and right controls -->
         <a class="left carousel-control" href="#myCarousel" data-slide="prev">
           <span class="glyphicon glyphicon-chevron-left"></span>
           <span class="sr-only">Previous</span>
         </a>
         
         <a class="right carousel-control" href="#myCarousel" data-slide="next">
           <span class="glyphicon glyphicon-chevron-right"></span>
           <span class="sr-only">Next</span>
         </a>
       </div>
      </div>
      <br>


      <!--SEARCH BAR-->
      <div class="row justify-content-center" style=" padding-left: 5vw; padding-right: 5vw;">
        <h3 style="float: left; text-align: left; ">Find gigs using <b>keywords</b></h3>
        <div class="input-group" style="justify-content: center; display: flex;">
          <input id="searchBar" type="search" class="form-control rounded" style="padding: 2vh; font-size: small; height: auto; width: 50px;" placeholder='Try typing "custom" ' aria-label="Search" aria-describedby="search-addon" />
          <button type="button" class="darkOutlineButton" style=" width: 10vw;" onclick="filterGigsByKeywords()">
            <i class="fa fa-search" aria-hidden="true"></i>
          </button>
        </div>
    </div>
    <h3 style="text-align: center; float: center;">or</h3>

    
      <!--SHOWCASE-->
      <h3 style="font-size: 5vh; text-align: center; margin-top: 6vh;">Browse quick gigs by <b>category</b></h3>
      <p style="margin-left: 3vh;">You are only one click away</p>
      <div class="row justify-content-center" style="margin-top: 5vh;">

        <div id="container" style="justify-content: center;">
          <div id="parent"  style="margin-left: 5vh;">
            <div id="categoriesContainer"></div>
              

          </div>
       
      </div>
      <div id="panLeft" class="zoom panner" data-scroll-modifier='-1' style="padding: 3vh">
        <img src="assets/icons/left_arrow.svg"/>
      </div>
      <div id="panRight" class="zoom panner" data-scroll-modifier='1' style="padding: 3vh">
        <img src="assets/icons/right_arrow.svg" style="margin: auto;"/>
      </div>

      </div>

      <a id="gigsMap"></a>
      <h2 id="gigTypeTitle" class="customTitle" style="width: 100vw; margin: 0; text-align: center;">Gigs near you</h2>

      <div class="row">
      <!--MAP-->
      <div class="col-12 col-md-5 col-lg-5" style="margin: 0; padding:0;">
        <div class="map" id="gigMapContainer" style="width: 100%; height: 80vh; float: center; margin: 0px; padding: 0%;"></div>
      </div>

      <!--JOB CARDS-->
      <div class="col-12 col-md-7 col-lg-7" style="height: 80vh; padding: 0%;">
        <div class="overflow-auto containerOf" id="gigCardsContainer" style="height: 80vh; margin: 0%; width: 100%;">
        </div>
      
      </div>
    </div>
    

 

      <!------POST GIGS FORM SECTION----->
      
      <div id="logintopostgigs" class="row" style="text-align: center; justify-content: center; width: 100vw; height: 40vh; align-items: center; background-color: black;" >
        <div>
        <h3 style="text-align: center; color: white;">Login to start posting gigs!</h3>
        <br>
        <a class="roundedButton button"  style="background-color: white; color: black; width: 40vh;" href="#login">Login</a>
      </div>

      </div>

      <div class="row">
      <a id="postGig"></a>
      <!--POST GIG FORM-->
      <form id="postGigForm" onsubmit="postGig(this)">
      <div class="row-12 justify-content-center" style="align-items: center; align-content: center; display: flex;">
        <div class="row container-fluid justify-content-center" style="width: 70vw; margin: 5vh; padding: 0; height: fit-content; border: 2px; border-color: black; border-style: groove; border-spacing: 0; background-color: white;" >
          <div class="container-fluid col-12 col-lg-6" style="padding: 5vh; margin: 0;  background-color: white;">
                    <div class="row">
                      <h3 class="customTitle" style="width:max-content">Gig post</h3>
                    </div>
                    <div class="form-row" style="padding: 3vh;">
                      <div class="form-group" >
                        
                        <div class="row">
                          <h4 class="formLabel" style="margin-bottom: 0%;">Contact info</h4>
                          <div class="col-12 p-2" >
                            <input type="name" class="form-control" id="postGigInputName"  placeholder="Full name" required>
                          </div>
                          <div class="col-12 col-lg-6 p-2">
                            <input type="email" class="form-control" id="postGigInputEmail" placeholder="Mail" required>
                          </div>
                          <div class="col-12 col-lg-6 p-2">
                            <input type="phone" class="form-control" id="postGigInputPhone" placeholder="Phone number" required>
                          </div>
                        </div>
  
                        <div class="row" style="margin-top: 2vh;">
                          <h4 class="formLabel" style="margin-bottom: 0%;">Gig details</h4>
                          <div class="col-12 col-lg-8 p-2" >                        
                            <input type="title" class="form-control" id="postGigInputTitle"  placeholder="Gig title" required>
                          </div>
                          <div class="col-12 col-lg-4 p-2" > 
                            <select id="postGigInputCategory" placeholder="Category" class="form-control" style="margin-bottom: 1vh;" aria-placeholder="Gig category" required>
                              <option value="" selected disabled>Category</option>
                            </select>
                          </div>
                          <div class="col-12">
                            <textarea class="form-control" id="postGigInputDescription" placeholder="Gig Description"></textarea>
                          </div>
                        </div>
  
                        <div class="row" style="margin-top: 2vh;">
                          <h4 class="formLabel" style="margin-bottom: 0%;">Gig address</h4>
                          <div class="col-12 p-2" >
                            <input type="address" class="form-control" id="postGigInputAddress"  placeholder="1234 Main Street" required>
                          </div>
                          <div class="col-12 p-2" >
                            <input type="address" class="form-control" id="postGigInputAddress2"  placeholder="Apartment, studio or floor #">
                          </div>
                        </div>

                        <div class="row" style=" margin-top: 2vh;">
                          <div class="col-12">
                          <input class="form-control" style="margin-bottom: 1vh;" id="postGigInputKeywords" onkeypress="addKeyword()"  placeholder="Keywords . . ."/>
                          <div id="kerwordsContainer" style="padding: 0; height: fit-content;">
                          </div>
                          </div>
                        </div>

                       
  
                      </div>
                    </div>
                    
          </div>
          <div class="container-fluid col-12 col-lg-6" style="color: white; background-color: black; padding: 5vh; margin: 0; height: 100%;">
             <div class="map" id="postMapContainer" style="width: 100%; height: 80vh;"></div>
          </div>
        </div>
      </div>
        <input id="postGigBtn" href="#jobs" class="roundedButton button"  type="submit" value="Submit gig" style="background-color: black; color: white; width: 40vh; margin-bottom: 10vh;"/>
        
      </form>

      <a id="mygigs"></a>
      <div id="removeMyGigs">
      <p style="font-family: BreeSerif-Regular; font-size: 3vh; background-color: black; color: white; padding: 3vh; margin: 0%; height: 10vh;">My gigs</p>
      <div class="row overflow-auto justify-content-center" style="width: 100%; height: fit-content; max-height: 90vh;">
        <div id="myGigsContainer" class="col-12 justify-content-center" style=" height: fit-content; margin: 0%;">
          <!--
            -
            -
            -
            MY GIGS CARDS
            -
            -
            -
          -->
        </div>
        
    </div>    
    </div>
  </div>
    <script>
    var keywords = [];
    var keywordLimit = 0;
        function deleteElement(element){
          keywordLimit = keywordLimit-1;
          keywords.splice(keywords.indexOf(element.innerHTML), 1);
          element.remove();
        }

        var input = document.getElementById("postGigInputKeywords");

        function addKeyword(){
          if (event.key == "Enter") {
            let val = input.value;
            if(val != ''){
              if(keywordLimit >= 3){
                showToast("The maximum amount of keywords is 3")
              }else{
                input.value = '';
                keywordLimit++;
                keywords.push(val);
                document.getElementById('kerwordsContainer').innerHTML += '<div class="keywordStyle new" style="width: max-content;" onclick="deleteElement(this)">'+val+'</div>'; 
              }
            }
            event.preventDefault();
          }
        }
    </script>

     
        <!--FOOTER-->
      <div class="row">
        <a id="footer"></a>
        <div class="container-fluid" style="height: fit-content; background-color: black; color: white;  border-top: 4px ridge; border-color: white;
        ">
          <div class="row">
            <div class="row" style="width:100%;padding: 5vh; padding-left: 10vh;">
              <div class="col-10" style="text-align: left; height: fit-content;">
                © QuickGigs, All rights reserved.
              </div>
              <div class="col-2 justify-content-right">
                <a href="https://www.instagram.com/marirocoarte/" style="color: white;"><i  class="fa-brands fa-instagram fa-xl" style="margin-right: 2vh;"></i></a><a href="https://www.youtube.com" style="color: white;"><i class="fa-brands fa-youtube fa-xl" style="margin-right: 2vh;"></i></a><a href="https://www.github.com/mariroco/" style="color: white;"><i class="fa-brands fa-github fa-xl" style="margin-right: 2vh;"></i></a>
              </div>
            </div>

          </div>
        </div>
        
        </div>
      </div>
      
    </div>


  
  </div>
  
   <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!--script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script-->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMrQgga-C5zCuZLTVk2MPVzX7naqKZXZU&callback=initMaps" async defer></script>
    <script>   
  
  $("#postGigForm").submit(function(e) {
    e.preventDefault();
  });
      var coordenadas = {
            lat: 27.1751,
            lng: 78.0421
        };

        var myStyle = [
  {
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#212121"
      }
    ]
  },
  {
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#212121"
      }
    ]
  },
  {
    "featureType": "administrative",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "administrative.country",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "administrative.locality",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#bdbdbd"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#181818"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#1b1b1b"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#2c2c2c"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#8a8a8a"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#373737"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#3c3c3c"
      }
    ]
  },
  {
    "featureType": "road.highway.controlled_access",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#4e4e4e"
      }
    ]
  },
  {
    "featureType": "road.local",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "featureType": "transit",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#000000"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#3d3d3d"
      }
    ]
  }
];
            
    function myFunction() {
      myVar = setTimeout(showPage, 3000);
      setTimeout(() => { AOS.init();}, 3000);
      initQuickGigs();
    }    

    //Init html
    function showPage() {
      document.getElementById("loader").style.display = "none";
      document.getElementById("myDiv").style.display = "block";
      fillCategories();
    }
    
    $(".navbar li").on("click", function() {       
      $(".navbar li").removeClass("active");
      $(this).addClass("active");
    });

    
    let mybutton = document.getElementById("btn-back-to-top");
    let btnPostGig = document.getElementById("btn_post_gig");

    btnPostGig.addEventListener("click", showPostGigForm )
    function showPostGigForm(){
      if (sessionStatus) {
        scrollTo("postGigs");
      }else{
        scrollTo("login");
        showToast("Log in to post a gig!");
      }
    }

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function () {
  scrollFunction();
};

function scrollTo(hash) {
    location.hash = "#" + hash;
};

function showToast(message){
  var snackBar = document.getElementById('snackbar');
  snackBar.innerHTML = message;
  snackBar.className = "show";
  setTimeout(function(){ snackBar.className = snackBar.className.replace("show", ""); }, 3000);
}

function scrollFunction() {
  if (
    document.body.scrollTop > 20 ||
    document.documentElement.scrollTop > 20
  ) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
  $(".navbar li").removeClass("active");
  $(homeli).addClass("active");
  
}
// When the user clicks on the button, scroll to the top of the document
mybutton.addEventListener("click", backToTop);

function backToTop() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}

//----------------------------------PANNING------------------------------------------

(function () {

var scrollHandle = 0,
    scrollStep = 5,
    parent = $("#container");

//Start the scrolling process
$(".panner").on("mouseenter", function () {
    var data = $(this).data('scrollModifier'),
        direction = parseInt(data, 10);

    $(this).addClass('active');

    startScrolling(direction, scrollStep);
});

//Kill the scrolling
$(".panner").on("mouseleave", function () {
    stopScrolling();
    $(this).removeClass('active');
});

//Actual handling of the scrolling
function startScrolling(modifier, step) {
    if (scrollHandle === 0) {
        scrollHandle = setInterval(function () {
            var newOffset = parent.scrollLeft() + (scrollStep * modifier);

            parent.scrollLeft(newOffset);
        }, 10);
    }
}

function stopScrolling() {
    clearInterval(scrollHandle);
    scrollHandle = 0;
}

}());


var divAccountForm = document.getElementById("accountForm");
function newLoginForm(){
  
  divAccountForm.innerHTML = '<div class="row justify-content-center"><div class="col-11  col-md-6  col-lg-5 align-items-center"><h3>Back for more?</h3></div></div><div class="row justify-content-center"><div class="col-11  col-md-6  col-lg-5 align-items-center"><input type="email" class="form-control" id="exampleFormControlInput1" placeholder="mail"></div></div><br><div class="row justify-content-center"><div class="col-11  col-md-6 col-lg-5 align-items-center"><input type="password" class="form-control" id="exampleFormControlInput1" placeholder="password"></div></div><div class="row justify-content-center" style="height: 20vh;  margin-top: 8vh;"><div class="col-11 col-md-6 "><a href="#jobs" class="roundedButton button" style="width:40vh;" href="#jobs" onclick="lookupCredentials()">LOG IN</a><br><br><a id="forgotPassword" href="">I forgot my password :(</a></div></div><div class="row justify-content-center"><div class="col-11 col-md-6 col-lg-5 align-items-center"><b><p>New to QuickGigs?</p></b><a id="newAccount" href="#" onclick="newAccountForm()">Create a new account</a></div></div>';
  
}

function ShowNewAccountForm(){
      divAccountForm.innerHTML = ' <div class="row justify-content-center"><div class="col-11 col-lg-5" style="align-items: left; text-align: left;"><h3>Welcome to QuickGigs!</h3><p>Create a new account</p></div></div><div class="row justify-content-center" style="margin-bottom: 10px;"><div class="col-11 col-lg-5 align-items-center"><input type="name" class="form-control" id="exampleFormControlInput1" placeholder="Name"></div></div><div class="row justify-content-center"  style="margin-bottom: 10px;"><div class="col-11 col-lg-5 align-items-center"><input type="mail" class="form-control" id="exampleFormControlInput1" placeholder="Mail"></div></div><div class="row justify-content-center"  style="margin-bottom: 10px;"><div class="col-11 col-lg-5 align-items-center"><input type="password" class="form-control" id="exampleFormControlInput1" placeholder="Password"></div></div><div class="row justify-content-center"><div class="col-11 col-lg-5 align-items-center"><input type="password" class="form-control" id="exampleFormControlInput1" placeholder="Confirm password"></div></div><div class="row justify-content-center" style="height: 20vh;  margin-top: 8vh;"><div class="col-12"><a href="#jobs" class="roundedButton button" style="width:40vh;" href="#jobs">CREATE ACCOUNT</a><br><br>or<br><a id="existingAccount" href="#" onClick="newLoginForm()">Login with existing account</a></div></div>';
}



//==============MAP FUNCTIONS===================================================
var gigsMap;
var postsMap;
var sessionStatus=true; 
var postMarker = [];
var gigsMarkers = [];

var gigsList = [];
var myGigsList = [];

//Initialize maps
function initMaps(){

  gigsMap = new google.maps.Map(document.getElementById("gigMapContainer"), {
        mapTypeControlOptions: {
        mapTypeIds: ['mystyle', google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN]
      },
        center: coordenadas,
        zoom: 12,
        mapTypeId: 'mystyle'
      });
  gigsMap.mapTypes.set('mystyle', new google.maps.StyledMapType(myStyle, { name: 'My Style' }));
  initMap(gigsMap);
  
  
  if(sessionStatus){
    
    postsMap =  new google.maps.Map(document.getElementById('postMapContainer'), {
        mapTypeControlOptions: {
          mapTypeIds: ['mystyle', google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN]
         },
        center: coordenadas,          
        zoom: 16,                
        mapTypeId: 'mystyle'
        });
    postsMap.mapTypes.set('mystyle', new google.maps.StyledMapType(myStyle, { name: 'My Style' }));
    postsMap.addListener('click', function(event){
      DeleteMarkers(postMarker);
      getAddressByCoords(event.latLng.lat(), event.latLng.lng());
      var marker =  new google.maps.Marker({position: event.latLng, map: postsMap});
      postMarker.push(marker);

      //setMarker(postGigsMarker,evento.latLng.lat(), evento.latlng.lng());
      

    });
    initMap(postsMap);
  }
}

function DeleteMarkers(markers) {

        //Loop through all the markers and remove
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }
        markers = [];
    };

function initMap(map){
  if(navigator.geolocation){
      setUserLocation(map);
  }else{
    showToast("Your navigator does not support geolocation");
  }


}

//LOCATE COORDS
function locate(lat,lng){
  gigsMap.panTo( new google.maps.LatLng( lat,lng) );
  gigsMap.setZoom(18);
}

//SET USER LOCATION
function setUserLocation(map){
  navigator.geolocation.getCurrentPosition( position => {
    var userPosition = {
      lat: position.coords.latitude,
      lng: position.coords.longitude
    };
    if(map == postsMap){
      marker = new google.maps.Marker({position: userPosition, map: map});

      getAddressByCoords(userPosition.lat,userPosition.lng);
      postMarker.push(marker);
    }
    map.panTo( new google.maps.LatLng( position.coords.latitude, position.coords.longitude ) );

  });
}

//GET ADDRESS STRING BY COORDS
function getAddressByCoords(lat, lng) {
    var latlng = new google.maps.LatLng(lat, lng);
    // This is making the Geocode request
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'latLng': latlng },  (results, status) =>{
        if (status !== google.maps.GeocoderStatus.OK) {
            alert(status);
        }
        // This is checking to see if the Geoeode Status is OK before proceeding
        if (status == google.maps.GeocoderStatus.OK) {
            var address = (results[0].formatted_address);
            var addressTextField = document.getElementById("postGigInputAddress");
            addressTextField.value = address;            
        }
    });
}

async function getGigs(){
  await getAllGigs();
  gigsList.forEach(gig => {
    let marker =  new google.maps.Marker({position: new google.maps.LatLng(gig.lat, gig.lng), map: gigsMap});
    marker.addListener('click',function(){
      console.log(gig);
      var topPos = document.getElementById('gigCard'+gig.id).offsetTop;
      document.getElementById('gigCardsContainer').scrollTop = topPos-10;
      
      $('#gigCard'+gig.id).css("backgroundColor", "#deebff").fadeOut;
      setTimeout(function(){
        //$('#gigCard'+gig.id).css("backgroundColor", "white");
        $('#gigCard'+gig.id).css("backgroundColor", "white").fadeIn();
      },1000);
      /*
      $('#gigCard'+gig.id).css("backgroundColor", "#deebff");
      setTimeout(function(){
        //$('#gigCard'+gig.id).css("backgroundColor", "white");
        $('#gigCard'+gig.id).css("backgroundColor", "#white");
      },1000).fadeIn();
/*
      $('#gigCard'+gig.i).eq(1).animate({
        backgroundColor: "white"
      }, 2000 );


      setTimeout(function(){
              $('#gigCard'+gig.i).eq(1).animate({
                backgroundColor: "#deebff"
              }, 2000 );
      },2000);
          

      /*
    var topPos = document.getElementById('gigCard'+gig.id).offsetTop;
    document.getElementById('gigCardsContainer').scrollTop = topPos-10;
    $('#'+gig.id).css("backgroundColor", "#deebff");
    setTimeout(function(){
      $('#'+gig.id).css("backgroundColor", "white");
    },2000); */
    //$('#gigCard'+gig.id).css("backgroundColor", "#deebff");
    //document.getElementById("gigCard"+gig.id).css("backgroundColor", "#deebff");
/*
    setTimeout(function(){
      document.getElementById("gigCard"+gig.id).css("backgroundColor", "white");
      //$('#gigCard'+gig.id).css("backgroundColor", "white");
    },2000);*/
    console.log("HELLO");
  });
  gigsMarkers.push(marker);

  })
}

function showGigs(list){
  var container = document.getElementById("gigCardsContainer");
  container.innerHTML = '';
  if(list.length == 0 ){
    container.innerHTML = '<div class="row" style="width:100%; height: 100%; align-items: left; padding: 25vh">No gigs available <p class="gigTitle" style="font-size: 10vh; margin-top: -12vh">:(</p></div>';
  }
  for(let i=0; i<list.length ; i++){
    createGigCard(list[i],"gigCardsContainer")
  }
}

async function showMyGigs(){
  myGigsList=[];
  await getMyGigs();
  console.log(myGigsList);
  document.getElementById("myGigsContainer").innerHTML='';
  if(myGigsList.length == 0 ){
    document.getElementById('myGigsContainer').innerHTML = '<div class="row" style="width:100%; height: 100%; align-items: left; padding: 25vh">No gigs available <p class="gigTitle" style="font-size: 10vh">:(</p></div>';
  }
  for(let i=0; i<myGigsList.length ; i++){
    createGigCard(myGigsList[i],"myGigsContainer")
  }
}

function filterGigsByCategory(category){
  var filteredList = [];
  if(category=="All"){
    filteredList = gigsList;
    document.getElementById('gigTypeTitle').innerHTML = 'Gigs near you';

  }else{
    gigsList.forEach(gig => {
      if(gig.category == category){
        filteredList.push(gig);
      }
    });
    document.getElementById('gigTypeTitle').innerHTML = category+' gigs near you';
  }
  showGigs(filteredList);
  scrollTo("gigsMap");

}

function filterGigsByKeywords(){
  var keyword = document.getElementById("searchBar").value
  if( input != ''){
    document.getElementById('gigTypeTitle').innerHTML = '"'+keyword+'" gigs near you';
    var filteredList = [];
    gigsList.forEach(gig => {
      gig.keywords.forEach(key => {
        if(key == keyword){
          filteredList.push(gig);
        }
      });
    });
    document.getElementById("searchBar").value = '';
    showGigs(filteredList)
    scrollTo("gigsMap");

  }else{
    showToast("Yo need to write something");
  }

  scrollTo("gigsMap");

}

function createGigCard(gig,contain){
  'document.getElementById('+'gigCard'+gig.id+"'"+')';
  console.log(gig.id +"=====================");
  var container = document.getElementById(contain);
  var colTop ='<div class="col-12" style="margin: 0;">'
  var colBot = '</div>'
  if(contain == "myGigsContainer"){
    colTop ='<div class="col-10" style="margin: 0;">';
    colBot = '</div>'
    +'<div class="col-1 justify-content-center" style=" margin: 0; padding:0 ">'
    +'<p class="hoverColor" onclick="deleteFieldById('+gig.id+')'+'"><i class="fa fa-trash " aria-hidden="true" style="margin-right: 1vh;"></i></p>'
    +'</div>'
  }
  container.innerHTML += '<div class="row justify-content-center" id="gigCard'+gig.id+'" style="width:100%; text-align: left; height: fit-content; padding: 5vh; padding-bottom: 0; " id="gigCard'+gig.id+'">'
  +colTop
  +'<b class="gigTitle">'+gig.title+'</b><br>'
  +'<p>'+gig.description+'</p>'
  +'<p style="float: left; margin-right: 1vh; width:fit-content;"><i class="fa fa-user " aria-hidden="true"></i> Posted by '+gig.name+'</p>'
  +'<p style="float: left; margin-right: 1vh; width:fit-content;"><i class="fa fa-envelope" aria-hidden="true"></i> '+gig.email+'</p>'
  +'<p style="float: left; margin-right: 1vh; width:fit-content;"><i class="fa fa-phone" aria-hidden="true"></i> '+gig.phone+'</p>'
  +'<p style="margin-right: 1vh;"><i class="fa fa-check" aria-hidden="true"></i> '+gig.category+'</p>'
  +'<p class="hoverColor" onclick="locate('+gig.lat+','+gig.lng+')"><i class="fa fa-map-marker" aria-hidden="true"></i> '+gig.address+'</p>'
  +keywordCards(gig.keywords)
  +colBot+'</div>'

  /*<div class="col-1 col-lg-1 justify-content-center" style="background-color: blue; padding-top: 9vh;">
          <div class="row justify-content-center"> X </div>
        </div> */
}

function keywordCards(gigKeywords){
  var kwDiv = '<div class="row" style="padding: 2vh;">';
    gigKeywords.forEach(tag => {
      kwDiv += '<div class="keywordStyle" style="width: max-content;">'+ tag +'</div>';
    })
    kwDiv += '</div>'
    return (kwDiv);
}

function scrollToElement(id){
  var topPos = document.getElementById(id).offsetTop;
  document.getElementById('gigCardsContainer').scrollTop = topPos-10;
  $('#'+id).css("backgroundColor", "#FDFF47");
  
}

function fillCategories(){
  var categoriesList = [];
  $("#categoriesContainer").innerHTML = '';
  //../Examen%20p2/
  fetch("data/jobCategories.json")
        .then( function(response){
            response.json().then(function(data){
                data.forEach(category => {
                  $('#postGigInputCategory').append('<option value="'+category.name+'">'+category.name+'</option>');
                  createCategoryCircle(category.name);
                });
                
            })
        });
  


}

function createCategoryCircle(category){
  var categoriesContainer = document.getElementById("categoriesContainer");
  if(category != 'All' && category != 'Miscellaneous'){
    categoriesContainer.innerHTML += '<div class="contentBlock zoom" onclick="filterGigsByCategory('+"'"+category+"'"+') " style="background-image: url('+'assets/imgs/categories/'+category+'.jpg); background-size: cover;">'
    +'<p class="contentBlockTitle">'+category+'</p>'
    +'</div>'
  }else{
    categoriesContainer.innerHTML += '<div class="contentBlock zoom" onclick="filterGigsByCategory('+"'"+category+"'"+') " background-size: cover;">'
    +'<p class="contentBlockTitle">'+category+'</p>'
    +'</div>'
  }
}
  </script>


     


  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-database.js"></script>

  <script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
    apiKey: "AIzaSyDfNJ9UgWHEbzC1LmQ2WKhfWLzDA_Rh1-Y",
    authDomain: "quickgigs-bc382.firebaseapp.com",
    projectId: "quickgigs-bc382",
    storageBucket: "quickgigs-bc382.appspot.com",
    messagingSenderId: "1043775452520",
    appId: "1:1043775452520:web:3ac50cdea0ac463e7592dd"
  };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = app.auth();
    const db = app.firestore();

  </script>

<script src="auth.js"></script>










</body>
</html>
